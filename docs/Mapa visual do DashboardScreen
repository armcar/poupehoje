ğŸ§­ Mapa visual do DashboardScreen

Vou dar-te uma visÃ£o estrutural do ficheiro, como se fosse um mapa mental.
Assim ficas logo a saber o quÃª faz o quÃª e onde mexer quando quiseres evoluir a app.

ğŸ§± 1. Estrutura principal
DashboardScreen (StatefulWidget)
â”‚
â”œâ”€ AppHeader(title, todayLabel, ...)
â”‚
â”œâ”€ Column
â”‚   â”œâ”€ _PeriodoFiltro      â† seleciona datas inÃ­cio/fim
â”‚   â”œâ”€ _ResumoPeriodo      â† total Entradas, SaÃ­das e Saldo
â”‚   â”œâ”€ _GraficoMovimentos  â† grÃ¡fico de barras (Entradas / SaÃ­das / Saldo)
â”‚   â”œâ”€ _GraficoCategorias  â† grÃ¡fico circular por categoria
â”‚   â””â”€ _UltimosMovimentos  â† lista de movimentos recentes
â”‚
â””â”€ FloatingActionButton (+) â†’ _showAddTransactionSheet()

ğŸ“… 2. _PeriodoFiltro

Mostra dois botÃµes (ğŸ“† â€œDeâ€ e â€œAtÃ©â€).

Usa showDatePicker() com locale pt_PT.

Atualiza o intervalo visÃ­vel no grÃ¡fico e resumo.

ğŸ’° 3. _ResumoPeriodo

Calcula Entradas, SaÃ­das e Saldo lÃ­quido no perÃ­odo selecionado.

Mostra trÃªs â€œcardsâ€ com cor (verde / vermelho / azul).

Fonte dos dados â†’ Firestore (users/demo_user/transactions).

ğŸ“Š 4. _GraficoMovimentos

Cria uma barra tripla por mÃªs:

ğŸ’š Entradas

â¤ï¸ SaÃ­das

âšª Saldo

Agrupa automaticamente por mÃªs/ano.

Adapta o eixo X com nomes abreviados (â€œJanâ€, â€œFevâ€, â€¦).

ğŸ¥§ 5. _GraficoCategorias

Soma valores de cada categoria no perÃ­odo.

Usa PieChart (fl_chart) com percentagens visuais.

Mostra a cor e o nome da categoria ao lado.

ğŸ§¾ 6. _UltimosMovimentos

Mostra atÃ© 10 movimentos recentes dentro do intervalo.

Ãcones e cores diferentes para entrada/saÃ­da.

Usa StreamBuilder â†’ atualiza em tempo real no Firestore.

â• 7. _showAddTransactionSheet

Abre modal inferior (showModalBottomSheet).

Campos:

Valor (aceita negativos âœ…)

DescriÃ§Ã£o

Categoria

Data

Guarda em Firestore:

users/demo_user/transactions/{id}
{
  "valor": -42.5,
  "descricao": "Supermercado",
  "categoria": "AlimentaÃ§Ã£o",
  "data": Timestamp(...)
}

ğŸ¨ 8. Estilo e consistÃªncia

Usa gradientes e sombras do AppTheme.

CabeÃ§alho (AppHeader) comum a todas as pÃ¡ginas.

CompatÃ­vel com modo escuro / claro.

LocalizaÃ§Ã£o e formataÃ§Ã£o de data com intl.

ğŸ’¡ Dica para evoluir:
Quando migrarmos para autenticaÃ§Ã£o real (login Google),
basta substituir demo_user por:

FirebaseAuth.instance.currentUser!.uid


e todo o resto continua a funcionar sem tocar em Firestore nem UI. âœ…